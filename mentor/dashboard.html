<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mentor Dashboard - SociallyFounded</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #003554 0%, #004a6b 100%);
            min-height: 100vh;
            color: #333;
        }

        .top-nav {
            background: rgba(0, 53, 84, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            color: white;
            font-size: 24px;
            font-weight: 700;
        }

        .nav-links {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .nav-links a:hover, .nav-links a.active {
            background: rgba(255, 255, 255, 0.1);
        }

        .nav-links a.locked {
            color: rgba(255, 255, 255, 0.5);
            cursor: not-allowed;
        }

        .mobile-menu {
            display: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }

        .container {
            max-width: 1200px;
            margin: 80px auto 0;
            padding: 40px 20px;
        }

        .page-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .page-header h1 {
            color: white;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .page-header p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.2rem;
        }

        .dashboard-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .card h3 {
            color: #003554;
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .stat-item {
            text-align: center;
            padding: 15px;
            background: #f5f5f5;
            border-radius: 8px;
        }

        .stat-number {
            font-size: 1.8rem;
            font-weight: 700;
            color: #003554;
        }

        .stat-label {
            font-size: 0.9rem;
            color: #666;
            margin-top: 5px;
        }

        .mentee-list {
            max-height: 300px;
            overflow-y: auto;
        }

        .mentee-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 15px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            margin-bottom: 10px;
            transition: all 0.3s ease;
        }

        .mentee-item:hover {
            border-color: #003554;
            transform: translateY(-2px);
        }

        .mentee-avatar {
            width: 50px;
            height: 50px;
            background: linear-gradient(135deg, #003554, #004a6b);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: 600;
        }

        .mentee-info {
            flex: 1;
        }

        .mentee-name {
            font-weight: 600;
            color: #003554;
            margin-bottom: 2px;
        }

        .mentee-status {
            font-size: 0.9rem;
            color: #666;
        }

        .idea-score {
            padding: 5px 10px;
            background: #d4af37;
            color: white;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: #003554;
            color: white;
        }

        .btn-primary:hover {
            background: #004a6b;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #f5f5f5;
            color: #003554;
            border: 1px solid #e0e0e0;
        }

        .btn-secondary:hover {
            background: #e0e0e0;
        }

        .full-width-card {
            grid-column: 1 / -1;
        }

        .opportunities-list {
            max-height: 400px;
            overflow-y: auto;
        }

        .opportunity-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
        }

        .opportunity-item:hover {
            border-color: #003554;
            transform: translateY(-2px);
        }

        .opportunity-info h4 {
            color: #003554;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .opportunity-meta {
            font-size: 0.9rem;
            color: #666;
        }

        .match-score {
            padding: 8px 15px;
            background: #d4af37;
            color: white;
            border-radius: 20px;
            font-weight: 600;
        }

        .research-publication {
            background: linear-gradient(135deg, #f5f5f5, #e0e0e0);
            border: 2px dashed #d4af37;
            text-align: center;
            padding: 40px;
            border-radius: 12px;
        }

        .research-publication h4 {
            color: #003554;
            margin-bottom: 15px;
        }

        .research-publication p {
            color: #666;
            margin-bottom: 20px;
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .mobile-menu {
                display: block;
            }

            .dashboard-grid {
                grid-template-columns: 1fr;
            }

            .page-header h1 {
                font-size: 2rem;
            }

            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .status-badge {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .status-active {
            background: #e8f5e8;
            color: #2d7d32;
        }

        .status-pending {
            background: #fff3e0;
            color: #f57c00;
        }

        .status-completed {
            background: #e3f2fd;
            color: #1976d2;
        }
    </style>
</head>
<body>
    <nav class="top-nav">
        <div class="nav-container">
            <div class="logo">SociallyFounded</div>
            <div class="nav-links" id="navLinks">
                <a href="../index.html">Home</a>
                <a href="../member/venues.html">Venues</a>
                <a href="../founder/ideas.html" id="ideasLink">Ideas</a>
                <a href="../mentor/dashboard.html" class="active" id="mentorLink">Mentor</a>
                <a href="../host/venues.html" class="locked" id="hostLink">Host</a>
                <a href="../investor/deals.html" class="locked" id="investorLink">Invest</a>
                <a href="../core/profile.html">Profile</a>
            </div>
            <div class="mobile-menu" onclick="toggleMobileMenu()">☰</div>
        </div>
    </nav>

    <div class="container">
        <div class="page-header">
            <h1>🎓 Mentor Dashboard</h1>
            <p>Guide entrepreneurs and contribute to research excellence</p>
        </div>

        <div class="dashboard-grid">
            <!-- Mentorship Stats -->
            <div class="card">
                <h3>📊 Your Impact</h3>
                <div class="stats-grid">
                    <div class="stat-item">
                        <div class="stat-number" id="activeMentees">3</div>
                        <div class="stat-label">Active Mentees</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="totalSessions">27</div>
                        <div class="stat-label">Sessions</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="avgScoreIncrease">+23</div>
                        <div class="stat-label">Avg Score Boost</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-number" id="publications">2</div>
                        <div class="stat-label">Publications</div>
                    </div>
                </div>
                <button class="btn btn-secondary" onclick="viewDetailedAnalytics()">View Detailed Analytics</button>
            </div>

            <!-- Current Mentees -->
            <div class="card">
                <h3>👥 Active Mentorships</h3>
                <div class="mentee-list" id="menteeList">
                    <div class="mentee-item" onclick="openMenteeProfile('sarah-tech')">
                        <div class="mentee-avatar">SJ</div>
                        <div class="mentee-info">
                            <div class="mentee-name">Sarah Johnson</div>
                            <div class="mentee-status">AI Healthcare Platform</div>
                        </div>
                        <div class="idea-score">Score: 78</div>
                        <span class="status-badge status-active">Active</span>
                    </div>
                    
                    <div class="mentee-item" onclick="openMenteeProfile('ahmed-fintech')">
                        <div class="mentee-avatar">AC</div>
                        <div class="mentee-info">
                            <div class="mentee-name">Ahmed Chen</div>
                            <div class="mentee-status">Fintech Solution</div>
                        </div>
                        <div class="idea-score">Score: 85</div>
                        <span class="status-badge status-active">Active</span>
                    </div>
                    
                    <div class="mentee-item" onclick="openMenteeProfile('maria-edu')">
                        <div class="mentee-avatar">MR</div>
                        <div class="mentee-info">
                            <div class="mentee-name">Maria Rodriguez</div>
                            <div class="mentee-status">EdTech Platform</div>
                        </div>
                        <div class="idea-score">Score: 71</div>
                        <span class="status-badge status-pending">Review Due</span>
                    </div>
                </div>
                <button class="btn btn-primary" onclick="scheduleSession()">Schedule New Session</button>
            </div>

            <!-- Research Publication Opportunity -->
            <div class="card full-width-card">
                <div class="research-publication">
                    <h4>📝 Research Publication Opportunity</h4>
                    <p>Transform your mentoring insights into academic publications. Gain recognition while contributing to entrepreneurship research.</p>
                    <button class="btn btn-primary" onclick="startResearchPublication()">Start Research Project</button>
                </div>
            </div>

            <!-- New Mentoring Opportunities -->
            <div class="card full-width-card">
                <h3>🔍 New Mentoring Opportunities</h3>
                <div class="opportunities-list" id="opportunitiesList">
                    <div class="opportunity-item" onclick="reviewOpportunity('alex-blockchain')">
                        <div class="opportunity-info">
                            <h4>Alex Thompson - Blockchain Supply Chain</h4>
                            <div class="opportunity-meta">
                                Looking for: Supply Chain Expert • Industry: Technology • Stage: Concept
                            </div>
                        </div>
                        <div class="match-score">95% Match</div>
                    </div>
                    
                    <div class="opportunity-item" onclick="reviewOpportunity('priya-healthtech')">
                        <div class="opportunity-info">
                            <h4>Priya Sharma - Telemedicine Platform</h4>
                            <div class="opportunity-meta">
                                Looking for: Healthcare Tech Advisor • Industry: Healthcare • Stage: Development
                            </div>
                        </div>
                        <div class="match-score">88% Match</div>
                    </div>
                    
                    <div class="opportunity-item" onclick="reviewOpportunity('carlos-greentech')">
                        <div class="opportunity-info">
                            <h4>Carlos Silva - Renewable Energy IoT</h4>
                            <div class="opportunity-meta">
                                Looking for: Clean Energy Mentor • Industry: Energy • Stage: Testing
                            </div>
                        </div>
                        <div class="match-score">82% Match</div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Check authentication and mentor access
        function checkMentorAccess() {
            const currentUser = JSON.parse(localStorage.getItem('sf_current_user') || '{}');
            
            console.log('🔧 DEBUG: Checking mentor access for user:', currentUser);
            
            // Check if user exists at all (either passportId OR verification data)
            if (!currentUser.passportId && !currentUser.verification && !currentUser.personas) {
                console.log('❌ No user data found, redirecting to auth');
                alert('Please log in first!');
                window.location.href = '../core/auth.html';
                return false;
            }
            
            // Auto-fix missing passportId if user has other data
            if (!currentUser.passportId && (currentUser.verification || currentUser.personas)) {
                console.log('🔧 Auto-fixing missing passportId');
                currentUser.passportId = 'SF-' + Math.floor(Math.random() * 900000 + 100000);
                localStorage.setItem('sf_current_user', JSON.stringify(currentUser));
                console.log('✅ Generated passportId:', currentUser.passportId);
            }
            
            // Check for verification (more flexible)
            if (!currentUser.verification || !currentUser.verification.linkedin) {
                console.log('❌ No LinkedIn verification found:', currentUser.verification);
                alert('Mentor access requires LinkedIn verification. Please complete verification in your profile first.');
                window.location.href = '../core/profile.html';
                return false;
            }
            
            // Auto-unlock mentor persona if verified
            if (!currentUser.personas) {
                currentUser.personas = {};
            }
            
            if (!currentUser.personas.mentor) {
                console.log('🔧 Auto-unlocking mentor persona for verified user');
                currentUser.personas.mentor = true;
                localStorage.setItem('sf_current_user', JSON.stringify(currentUser));
            }
            
            console.log('✅ Mentor access granted for user:', currentUser.passportId);
            return true;
        }

        // Update navigation based on user personas
        function updateNavigation() {
            const currentUser = JSON.parse(localStorage.getItem('sf_current_user') || '{}');
            
            if (currentUser.personas) {
                // Update Ideas link
                const ideasLink = document.getElementById('ideasLink');
                if (currentUser.personas.founder) {
                    ideasLink.classList.remove('locked');
                } else {
                    ideasLink.classList.add('locked');
                }
                
                // Update Mentor link 
                const mentorLink = document.getElementById('mentorLink');
                if (currentUser.personas.mentor) {
                    mentorLink.classList.remove('locked');
                } else {
                    mentorLink.classList.add('locked');
                }
                
                // Update Host link
                const hostLink = document.getElementById('hostLink');
                if (currentUser.personas.host) {
                    hostLink.classList.remove('locked');
                } else {
                    hostLink.classList.add('locked');
                }
                
                // Update Investor link
                const investorLink = document.getElementById('investorLink');
                if (currentUser.personas.investor) {
                    investorLink.classList.remove('locked');
                } else {
                    investorLink.classList.add('locked');
                }
            }
        }

        // Open mentee profile for detailed view
        function openMenteeProfile(menteeId) {
            alert(`Opening detailed profile for ${menteeId}.\n\nFeatures:\n• Session history\n• Idea progression tracking\n• Communication tools\n• Progress analytics\n\n(Full implementation in next development phase)`);
        }

        // Schedule new mentoring session
        function scheduleSession() {
            alert('Opening session scheduler...\n\nFeatures:\n• Calendar integration\n• Video call setup\n• Session agenda templates\n• Automatic reminders\n\n(Full implementation in next development phase)');
        }

        // View detailed analytics
        function viewDetailedAnalytics() {
            alert('Opening detailed mentorship analytics...\n\nMetrics include:\n• Mentee progress over time\n• Session effectiveness scores\n• Idea improvement attribution\n• Research contribution tracking\n\n(Full implementation in next development phase)');
        }

        // Start research publication process
        function startResearchPublication() {
            alert('Starting research publication wizard...\n\nProcess:\n1. Select mentoring insights to analyze\n2. AI-assisted research framework\n3. Academic writing support\n4. Publication venue suggestions\n5. Co-authorship with mentees\n\n(Full implementation in next development phase)');
            
            // Award XP for starting research
            awardXP(200, 'Started research publication project!');
        }

        // Review mentoring opportunity
        function reviewOpportunity(opportunityId) {
            const opportunities = {
                'alex-blockchain': {
                    name: 'Alex Thompson',
                    idea: 'Blockchain Supply Chain Transparency',
                    description: 'Revolutionary blockchain platform for complete supply chain visibility',
                    stage: 'Concept Development',
                    looking: 'Supply chain expert with blockchain knowledge',
                    commitment: '2 hours/week for 3 months'
                },
                'priya-healthtech': {
                    name: 'Priya Sharma', 
                    idea: 'AI-Powered Telemedicine Platform',
                    description: 'Connecting rural patients with specialists via AI diagnostics',
                    stage: 'MVP Development',
                    looking: 'Healthcare technology advisor',
                    commitment: '3 hours/week for 4 months'
                },
                'carlos-greentech': {
                    name: 'Carlos Silva',
                    idea: 'IoT Renewable Energy Management',
                    description: 'Smart grid optimization using IoT sensors and AI',
                    stage: 'Beta Testing',
                    looking: 'Clean energy industry mentor',
                    commitment: '1.5 hours/week for 6 months'
                }
            };
            
            const opp = opportunities[opportunityId];
            
            const response = confirm(`Mentoring Opportunity: ${opp.name}\n\nIdea: ${opp.idea}\nDescription: ${opp.description}\nStage: ${opp.stage}\nLooking for: ${opp.looking}\nCommitment: ${opp.commitment}\n\nWould you like to express interest in mentoring this founder?`);
            
            if (response) {
                alert('Interest submitted! The founder will be notified and you\'ll receive a connection request within 24 hours.');
                awardXP(100, 'Expressed interest in new mentee!');
                
                // Remove opportunity from list (simulate)
                event.target.closest('.opportunity-item').style.opacity = '0.5';
                event.target.closest('.opportunity-item').innerHTML += '<div style="text-align: center; color: #d4af37; font-weight: 600; margin-top: 10px;">Interest Submitted ✓</div>';
            }
        }

        // Award XP function
        function awardXP(points, reason) {
            const currentUser = JSON.parse(localStorage.getItem('sf_current_user') || '{}');
            currentUser.passport.experience = (currentUser.passport.experience || 0) + points;
            
            // Update level based on XP (every 1000 XP = 1 level)
            currentUser.passport.level = Math.floor(currentUser.passport.experience / 1000) + 1;
            
            localStorage.setItem('sf_current_user', JSON.stringify(currentUser));
            
            // Show XP notification
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed; top: 100px; right: 20px; z-index: 10000;
                background: #d4af37; color: white; padding: 15px 20px;
                border-radius: 8px; font-weight: 600; box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                animation: slideIn 0.3s ease-out;
            `;
            notification.innerHTML = `+${points} XP: ${reason}`;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-in forwards';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Add CSS animations for notifications
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Mobile menu toggle
        function toggleMobileMenu() {
            const navLinks = document.getElementById('navLinks');
            navLinks.style.display = navLinks.style.display === 'flex' ? 'none' : 'flex';
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            if (!checkMentorAccess()) return;
            updateNavigation();
            
            // Load mentor-specific data
            loadMentorshipData();
        });

        // Load mentorship data
        function loadMentorshipData() {
            // Simulate loading mentor stats from localStorage or API
            const mentorData = JSON.parse(localStorage.getItem('sf_mentor_data') || '{}');
            
            // Update stats if available
            if (mentorData.stats) {
                document.getElementById('activeMentees').textContent = mentorData.stats.activeMentees || 3;
                document.getElementById('totalSessions').textContent = mentorData.stats.totalSessions || 27;
                document.getElementById('avgScoreIncrease').textContent = '+' + (mentorData.stats.avgScoreIncrease || 23);
                document.getElementById('publications').textContent = mentorData.stats.publications || 2;
            }
        }
    </script>
</body>
</html>
