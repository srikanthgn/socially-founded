<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Founder Ideas - SociallyFounded</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, #003554 0%, #004a6b 100%);
            min-height: 100vh;
            color: #333;
        }

        .top-nav {
            background: rgba(0, 53, 84, 0.95);
            backdrop-filter: blur(10px);
            padding: 15px 20px;
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            color: white;
            font-size: 24px;
            font-weight: 700;
        }

        .nav-links {
            display: flex;
            gap: 30px;
            align-items: center;
        }

        .nav-links a {
            color: white;
            text-decoration: none;
            font-weight: 500;
            padding: 8px 16px;
            border-radius: 6px;
            transition: all 0.3s ease;
        }

        .nav-links a:hover, .nav-links a.active {
            background: rgba(255, 255, 255, 0.1);
        }

        .nav-links a.locked {
            color: rgba(255, 255, 255, 0.5);
            cursor: not-allowed;
        }

        .mobile-menu {
            display: none;
            color: white;
            font-size: 24px;
            cursor: pointer;
        }

        .container {
            max-width: 1200px;
            margin: 80px auto 0;
            padding: 40px 20px;
        }

        .page-header {
            text-align: center;
            margin-bottom: 40px;
        }

        .page-header h1 {
            color: white;
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 10px;
        }

        .page-header p {
            color: rgba(255, 255, 255, 0.8);
            font-size: 1.2rem;
        }

        .ideas-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 40px;
        }

        .card {
            background: white;
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
        }

        .card h3 {
            color: #003554;
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .create-idea {
            border: 2px dashed #d4af37;
            background: linear-gradient(135deg, #f5f5f5, #e0e0e0);
            text-align: center;
            min-height: 300px;
            display: flex;
            flex-direction: column;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .create-idea:hover {
            border-color: #003554;
            transform: translateY(-2px);
        }

        .create-idea h3 {
            color: #003554;
            margin-bottom: 15px;
        }

        .create-idea p {
            color: #666;
            margin-bottom: 20px;
        }

        .btn {
            padding: 12px 24px;
            border: none;
            border-radius: 6px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            text-decoration: none;
            display: inline-block;
            text-align: center;
        }

        .btn-primary {
            background: #003554;
            color: white;
        }

        .btn-primary:hover {
            background: #004a6b;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #d4af37;
            color: white;
        }

        .btn-secondary:hover {
            background: #b8941f;
        }

        .idea-item {
            border: 1px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            margin-bottom: 15px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .idea-item:hover {
            border-color: #003554;
            transform: translateY(-2px);
        }

        .idea-header {
            display: flex;
            justify-content: between;
            align-items: flex-start;
            margin-bottom: 10px;
        }

        .idea-id {
            font-size: 0.9rem;
            color: #d4af37;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .idea-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: #003554;
            margin-bottom: 8px;
        }

        .idea-stage {
            padding: 4px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .stage-napkin {
            background: #fff3e0;
            color: #f57c00;
        }

        .stage-analysis {
            background: #e3f2fd;
            color: #1976d2;
        }

        .stage-skills {
            background: #f3e5f5;
            color: #7b1fa2;
        }

        .stage-mentoring {
            background: #e8f5e8;
            color: #2d7d32;
        }

        .skill-tags {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin-top: 10px;
        }

        .skill-tag {
            padding: 4px 8px;
            background: #f5f5f5;
            border: 1px solid #e0e0e0;
            border-radius: 12px;
            font-size: 0.8rem;
            color: #666;
        }

        .skill-tag.critical {
            background: #ffebee;
            border-color: #f44336;
            color: #d32f2f;
        }

        .skill-tag.important {
            background: #fff3e0;
            border-color: #ff9800;
            color: #f57c00;
        }

        .path-badge {
            padding: 6px 12px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            margin-left: auto;
        }

        .path-bootstrapper {
            background: #e8f5e8;
            color: #2d7d32;
        }

        .path-investor {
            background: #e3f2fd;
            color: #1976d2;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.8);
            z-index: 10000;
        }

        .modal-content {
            background: white;
            max-width: 600px;
            margin: 5% auto;
            padding: 30px;
            border-radius: 12px;
            max-height: 80vh;
            overflow-y: auto;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #003554;
        }

        .form-group input,
        .form-group textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #e0e0e0;
            border-radius: 6px;
            font-family: inherit;
        }

        .form-group textarea {
            min-height: 120px;
            resize: vertical;
        }

        .ai-analysis {
            background: #f8f9fa;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .ai-analysis h4 {
            color: #003554;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .path-selection {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
            margin: 20px 0;
        }

        .path-option {
            border: 2px solid #e0e0e0;
            border-radius: 8px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .path-option:hover,
        .path-option.selected {
            border-color: #003554;
            background: #f8f9fa;
        }

        .path-option h5 {
            color: #003554;
            margin-bottom: 8px;
        }

        .skill-analysis {
            margin-top: 20px;
        }

        .skill-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            border-bottom: 1px solid #e0e0e0;
        }

        .skill-importance {
            padding: 4px 8px;
            border-radius: 12px;
            font-size: 0.8rem;
            font-weight: 600;
        }

        .importance-critical {
            background: #ffebee;
            color: #d32f2f;
        }

        .importance-important {
            background: #fff3e0;
            color: #f57c00;
        }

        .importance-helpful {
            background: #f3e5f5;
            color: #7b1fa2;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        @media (max-width: 768px) {
            .nav-links {
                display: none;
            }

            .mobile-menu {
                display: block;
            }

            .ideas-grid {
                grid-template-columns: 1fr;
            }

            .page-header h1 {
                font-size: 2rem;
            }

            .path-selection {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <nav class="top-nav">
        <div class="nav-container">
            <div class="logo">SociallyFounded</div>
            <div class="nav-links" id="navLinks">
                <a href="../index.html">Home</a>
                <a href="../member/venues.html">Venues</a>
                <a href="../founder/ideas.html" class="active" id="ideasLink">Ideas</a>
                <a href="../mentor/dashboard.html" id="mentorLink">Mentor</a>
                <a href="../host/venues.html" class="locked" id="hostLink">Host</a>
                <a href="../investor/deals.html" class="locked" id="investorLink">Invest</a>
                <a href="../core/profile.html">Profile</a>
            </div>
            <div class="mobile-menu" onclick="toggleMobileMenu()">☰</div>
        </div>
    </nav>

    <div class="container">
        <div class="page-header">
            <h1>🚀 Your Ideas</h1>
            <p>From napkin scribbles to investment-ready ventures</p>
        </div>

        <div class="ideas-grid">
            <!-- Create New Idea -->
            <div class="card create-idea" onclick="openCreateModal()">
                <h3>💡 Scribble a New Napkin</h3>
                <p>Start with your raw idea - we'll help you build it into something amazing</p>
                <button class="btn btn-primary">Start Scribbling</button>
            </div>

            <!-- Your Ideas List -->
            <div class="card">
                <h3>📝 Your Idea Portfolio</h3>
                <div id="ideasList">
                    <!-- Ideas will be loaded here -->
                </div>
            </div>
        </div>
    </div>

    <!-- Create Idea Modal -->
    <div id="createModal" class="modal">
        <div class="modal-content">
            <h3>💡 Scribble Your Napkin Idea</h3>
            <p>Just like the "Glass Onion" methodology - start with your raw idea, we'll help you build the empire.</p>
            
            <form id="createIdeaForm">
                <div class="form-group">
                    <label for="ideaTitle">What's your idea called?</label>
                    <input type="text" id="ideaTitle" placeholder="AI-powered something..." required>
                </div>
                
                <div class="form-group">
                    <label for="ideaDescription">Describe your napkin scribble:</label>
                    <textarea id="ideaDescription" placeholder="Describe what you're thinking... be as raw and honest as you want. We'll help you refine it." required></textarea>
                </div>

                <!-- AI Analysis Results -->
                <div id="aiAnalysis" class="ai-analysis" style="display: none;">
                    <h4>🤖 AI Analysis Complete</h4>
                    <div id="analysisContent"></div>

                    <!-- Path Selection -->
                    <div id="pathSelection" class="path-selection" style="display: none;">
                        <div class="path-option" data-path="bootstrapper" onclick="selectPath('bootstrapper')">
                            <h5>🥾 Bootstrapper Path</h5>
                            <p>Build lean, generate revenue quickly, grow organically</p>
                        </div>
                        <div class="path-option" data-path="investor" onclick="selectPath('investor')">
                            <h5>💰 Investor Path</h5>
                            <p>Build for scale, seek investment, rapid market capture</p>
                        </div>
                    </div>

                    <!-- Skill Analysis -->
                    <div id="skillAnalysis" class="skill-analysis" style="display: none;">
                        <h4>🎯 Required Skills for Your Path</h4>
                        <div id="skillsList"></div>
                    </div>
                </div>

                <div style="display: flex; gap: 15px; margin-top: 30px;">
                    <button type="button" class="btn btn-secondary" onclick="analyzeWithAI()">🤖 Enhance with AI</button>
                    <button type="submit" class="btn btn-primary">🔒 Protect IP & Save</button>
                    <button type="button" class="btn" onclick="closeModal()" style="background: #666; color: white;">Cancel</button>
                </div>
            </form>
        </div>
    </div>

    <script>
        // Check founder access and load ideas
        function checkFounderAccess() {
            const currentUser = JSON.parse(localStorage.getItem('sf_current_user') || '{}');
            
            if (!currentUser.passportId && !currentUser.verification) {
                alert('Please log in first!');
                window.location.href = '../core/auth.html';
                return false;
            }
            
            if (!currentUser.verification || !currentUser.verification.linkedin) {
                alert('Founder access requires LinkedIn verification. Please complete verification in your profile first.');
                window.location.href = '../core/profile.html';
                return false;
            }
            
            // Auto-unlock founder persona if verified
            if (!currentUser.personas) {
                currentUser.personas = {};
            }
            
            if (!currentUser.personas.founder) {
                currentUser.personas.founder = true;
                localStorage.setItem('sf_current_user', JSON.stringify(currentUser));
            }
            
            return true;
        }

        // Update navigation based on user personas
        function updateNavigation() {
            const currentUser = JSON.parse(localStorage.getItem('sf_current_user') || '{}');
            
            if (currentUser.personas) {
                const mentorLink = document.getElementById('mentorLink');
                if (currentUser.personas.mentor) {
                    mentorLink.classList.remove('locked');
                } else {
                    mentorLink.classList.add('locked');
                }
                
                const hostLink = document.getElementById('hostLink');
                if (currentUser.personas.host) {
                    hostLink.classList.remove('locked');
                } else {
                    hostLink.classList.add('locked');
                }
                
                const investorLink = document.getElementById('investorLink');
                if (currentUser.personas.investor) {
                    investorLink.classList.remove('locked');
                } else {
                    investorLink.classList.add('locked');
                }
            }
        }

        // Global variables
        let currentAnalysis = null;
        let selectedPath = null;

        // Open create idea modal
        function openCreateModal() {
            document.getElementById('createModal').style.display = 'block';
            // Reset form
            document.getElementById('createIdeaForm').reset();
            document.getElementById('aiAnalysis').style.display = 'none';
            currentAnalysis = null;
            selectedPath = null;
        }

        // Close modal
        function closeModal() {
            document.getElementById('createModal').style.display = 'none';
        }

        // Analyze idea with AI
        async function analyzeWithAI() {
            const title = document.getElementById('ideaTitle').value;
            const description = document.getElementById('ideaDescription').value;
            
            if (!title || !description) {
                alert('Please fill in your idea title and description first!');
                return;
            }

            const analysisDiv = document.getElementById('aiAnalysis');
            const contentDiv = document.getElementById('analysisContent');
            
            analysisDiv.style.display = 'block';
            contentDiv.innerHTML = '<div class="loading">🤖 AI is analyzing your idea...</div>';

            try {
                // Here we'll integrate real OpenAI API
                // For now, simulating AI analysis
                await simulateAIAnalysis(title, description);
                
            } catch (error) {
                console.error('AI Analysis error:', error);
                contentDiv.innerHTML = '<div style="color: #d32f2f;">❌ AI analysis failed. Please try again.</div>';
            }
        }

        // Simulate AI analysis (will be replaced with real OpenAI)
        async function simulateAIAnalysis(title, description) {
            // Simulate API delay
            await new Promise(resolve => setTimeout(resolve, 2000));
            
            // Mock AI analysis based on idea content
            const analysis = generateMockAnalysis(title, description);
            currentAnalysis = analysis;
            
            const contentDiv = document.getElementById('analysisContent');
            contentDiv.innerHTML = `
                <p><strong>Idea Category:</strong> ${analysis.category}</p>
                <p><strong>Market Potential:</strong> ${analysis.marketPotential}</p>
                <p><strong>Technical Complexity:</strong> ${analysis.technicalComplexity}</p>
                <p><strong>AI Recommendation:</strong> ${analysis.recommendation}</p>
            `;
            
            // Show path selection
            document.getElementById('pathSelection').style.display = 'block';
        }

        // Generate mock AI analysis
        function generateMockAnalysis(title, description) {
            const categories = ['HealthTech', 'FinTech', 'EdTech', 'RetailTech', 'GreenTech'];
            const potentials = ['High', 'Medium-High', 'Medium', 'Promising'];
            const complexities = ['Medium', 'High', 'Low-Medium', 'Complex'];
            
            return {
                category: categories[Math.floor(Math.random() * categories.length)],
                marketPotential: potentials[Math.floor(Math.random() * potentials.length)],
                technicalComplexity: complexities[Math.floor(Math.random() * complexities.length)],
                recommendation: 'This idea shows strong potential with proper skill development and strategic positioning.'
            };
        }

        // Select development path
        function selectPath(path) {
            selectedPath = path;
            
            // Update UI
            document.querySelectorAll('.path-option').forEach(option => {
                option.classList.remove('selected');
            });
            document.querySelector(`[data-path="${path}"]`).classList.add('selected');
            
            // Generate skill requirements
            generateSkillRequirements(path);
        }

        // Generate skill requirements based on path
        function generateSkillRequirements(path) {
            const skills = getSkillsForPath(path, currentAnalysis);
            
            const skillsDiv = document.getElementById('skillsList');
            skillsDiv.innerHTML = skills.map(skill => `
                <div class="skill-item">
                    <span>${skill.name}</span>
                    <span class="skill-importance importance-${skill.importance.toLowerCase()}">${skill.importance}</span>
                </div>
            `).join('');
            
            document.getElementById('skillAnalysis').style.display = 'block';
        }

        // Get skills based on path and analysis
        function getSkillsForPath(path, analysis) {
            const baseSkills = [
                { name: 'Market Research', importance: 'Important' },
                { name: 'Product Development', importance: 'Critical' },
                { name: 'Customer Development', importance: 'Critical' }
            ];
            
            if (path === 'bootstrapper') {
                return [
                    ...baseSkills,
                    { name: 'Revenue Generation', importance: 'Critical' },
                    { name: 'Lean Operations', importance: 'Important' },
                    { name: 'Cost Management', importance: 'Important' }
                ];
            } else {
                return [
                    ...baseSkills,
                    { name: 'Investment Readiness', importance: 'Critical' },
                    { name: 'Scalable Architecture', importance: 'Critical' },
                    { name: 'Team Building', importance: 'Important' },
                    { name: 'Legal & Compliance', importance: 'Important' }
                ];
            }
        }

        // Handle form submission
        document.getElementById('createIdeaForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const title = document.getElementById('ideaTitle').value;
            const description = document.getElementById('ideaDescription').value;
            
            if (!currentAnalysis) {
                alert('Please run AI analysis first!');
                return;
            }
            
            if (!selectedPath) {
                alert('Please select your development path!');
                return;
            }
            
            saveIdea(title, description, currentAnalysis, selectedPath);
        });

        // Save idea with IP protection
        function saveIdea(title, description, analysis, path) {
            const currentUser = JSON.parse(localStorage.getItem('sf_current_user') || '{}');
            const today = new Date();
            const dateStr = today.getFullYear() + 
                          String(today.getMonth() + 1).padStart(2, '0') + 
                          String(today.getDate()).padStart(2, '0');
            
            // Generate SF ID with correct format: SF-XXXXX-XX (professional hashed format)
            const firstPart = Math.random().toString(36).substring(2, 7).toUpperCase();
            const secondPart = Math.random().toString(36).substring(2, 4).toUpperCase();
            const ideaId = `SF-${firstPart}-${secondPart}`;
            
            const idea = {
                id: ideaId,
                title: title,
                description: description,
                createdAt: today.toISOString(),
                stage: 'skills-analysis',
                aiAnalysis: analysis,
                developmentPath: path,
                skillRequirements: getSkillsForPath(path, analysis),
                createdBy: currentUser.passportId,
                ipProtected: true
            };
            
            // Save to localStorage
            const existingIdeas = JSON.parse(localStorage.getItem('sf_founder_ideas') || '[]');
            existingIdeas.push(idea);
            localStorage.setItem('sf_founder_ideas', JSON.stringify(existingIdeas));
            
            // Award XP
            awardXP(100, `Created AI-enhanced idea: ${title}`);
            
            // Show success
            alert(`🎉 Idea protected and saved!\n\nYour SF ID: ${ideaId}\n\nThis professional ID provides IP protection and tracks your idea's journey from napkin to empire.`);
            
            closeModal();
            loadIdeas();
        }

        // Load existing ideas
        function loadIdeas() {
            const ideas = JSON.parse(localStorage.getItem('sf_founder_ideas') || '[]');
            const listDiv = document.getElementById('ideasList');
            
            if (ideas.length === 0) {
                listDiv.innerHTML = '<p style="color: #666; text-align: center; padding: 20px;">No ideas yet. Start by scribbling your first napkin!</p>';
                return;
            }
            
            listDiv.innerHTML = ideas.map(idea => `
                <div class="idea-item" onclick="viewIdea('${idea.id}')">
                    <div class="idea-header">
                        <div>
                            <div class="idea-id">${idea.id}</div>
                            <div class="idea-title">${idea.title}</div>
                        </div>
                        <div style="display: flex; gap: 10px; align-items: center;">
                            <span class="idea-stage stage-${idea.stage}">${formatStage(idea.stage)}</span>
                            <span class="path-badge path-${idea.developmentPath}">${formatPath(idea.developmentPath)}</span>
                        </div>
                    </div>
                    <div class="skill-tags">
                        ${idea.skillRequirements ? idea.skillRequirements.slice(0, 3).map(skill => 
                            `<span class="skill-tag ${skill.importance.toLowerCase()}">${skill.name}</span>`
                        ).join('') : ''}
                        ${idea.skillRequirements && idea.skillRequirements.length > 3 ? 
                            `<span class="skill-tag">+${idea.skillRequirements.length - 3} more</span>` : ''}
                    </div>
                </div>
            `).join('');
        }

        // Format stage display
        function formatStage(stage) {
            const stages = {
                'napkin': 'Napkin',
                'analysis': 'AI Analysis',
                'skills-analysis': 'Skills Analysis',
                'mentoring': 'Active Mentoring'
            };
            return stages[stage] || stage;
        }

        // Format path display
        function formatPath(path) {
            return path === 'bootstrapper' ? 'Bootstrap' : 'Investment';
        }

        // View idea details
        function viewIdea(ideaId) {
            const ideas = JSON.parse(localStorage.getItem('sf_founder_ideas') || '[]');
            const idea = ideas.find(i => i.id === ideaId);
            
            if (!idea) return;
            
            alert(`Idea: ${idea.title}\n\nID: ${idea.id}\nPath: ${formatPath(idea.developmentPath)}\nStage: ${formatStage(idea.stage)}\n\nRequired Skills:\n${idea.skillRequirements.map(s => `• ${s.name} (${s.importance})`).join('\n')}\n\n(Full idea management coming in next phase)`);
        }

        // Award XP function
        function awardXP(points, reason) {
            const currentUser = JSON.parse(localStorage.getItem('sf_current_user') || '{}');
            currentUser.passport = currentUser.passport || {};
            currentUser.passport.experience = (currentUser.passport.experience || 0) + points;
            currentUser.passport.level = Math.floor(currentUser.passport.experience / 1000) + 1;
            
            localStorage.setItem('sf_current_user', JSON.stringify(currentUser));
            
            // Show XP notification
            const notification = document.createElement('div');
            notification.style.cssText = `
                position: fixed; top: 100px; right: 20px; z-index: 10000;
                background: #d4af37; color: white; padding: 15px 20px;
                border-radius: 8px; font-weight: 600; box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                animation: slideIn 0.3s ease-out;
            `;
            notification.innerHTML = `+${points} XP: ${reason}`;
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.animation = 'slideOut 0.3s ease-in forwards';
                setTimeout(() => notification.remove(), 300);
            }, 3000);
        }

        // Add CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes slideIn {
                from { transform: translateX(100%); opacity: 0; }
                to { transform: translateX(0); opacity: 1; }
            }
            @keyframes slideOut {
                from { transform: translateX(0); opacity: 1; }
                to { transform: translateX(100%); opacity: 0; }
            }
        `;
        document.head.appendChild(style);

        // Mobile menu toggle
        function toggleMobileMenu() {
            const navLinks = document.getElementById('navLinks');
            navLinks.style.display = navLinks.style.display === 'flex' ? 'none' : 'flex';
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            if (!checkFounderAccess()) return;
            updateNavigation();
            loadIdeas();
        });

        // Close modal when clicking outside
        window.addEventListener('click', function(e) {
            const modal = document.getElementById('createModal');
            if (e.target === modal) {
                closeModal();
            }
        });
    </script>
</body>
</html>
