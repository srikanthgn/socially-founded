<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SociallyFounded - My Passport</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root {
            --navy: #003554;
            --light-gray: #F5F5F5;
            --accent-gray: #E0E0E0;
            --white: #FFFFFF;
            --success: #10B981;
            --warning: #F59E0B;
            --gold: #D4AF37;
            --bronze: #CD7F32;
            --silver: #C0C0C0;
            --platinum: #E5E4E2;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: var(--light-gray);
            min-height: 100vh;
            padding-top: 60px;
        }

        /* BULLETPROOF NAVIGATION - IDENTICAL TO AUTH.HTML */
        .sf-navbar {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            box-shadow: 0 2px 10px rgba(0, 53, 84, 0.1);
            position: fixed;
            width: 100%;
            top: 0;
            z-index: 1000;
            transition: all 0.3s ease;
        }

        .sf-nav-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            height: 60px;
        }

        .sf-logo {
            display: flex;
            align-items: center;
            gap: 10px;
            font-family: 'Poppins', sans-serif;
            font-size: 18px;
            font-weight: 700;
            color: var(--navy);
            text-decoration: none;
        }

        .sf-logo-icon {
            width: 32px;
            height: 32px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .sf-logo-icon img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .sf-nav-menu {
            display: flex;
            list-style: none;
            gap: 20px;
            align-items: center;
            margin: 0;
            padding: 0;
        }

        .sf-nav-link {
            color: #666;
            text-decoration: none;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            font-size: 14px;
            transition: all 0.3s ease;
            padding: 8px 12px;
            border-radius: 15px;
        }

        .sf-nav-link:hover {
            color: var(--navy);
            background: var(--light-gray);
        }

        .sf-nav-link.active {
            color: var(--white);
            background: var(--navy);
        }

        .sf-user-section {
            display: none;
            align-items: center;
            gap: 15px;
        }

        .sf-user-passport {
            background: var(--light-gray);
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 11px;
            font-weight: 600;
            color: var(--navy);
            font-family: 'Courier New', monospace;
        }

        .sf-logout-btn {
            background: transparent;
            border: 1px solid var(--accent-gray);
            color: #666;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-family: 'Poppins', sans-serif;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .sf-logout-btn:hover {
            background: #ff4444;
            color: white;
            border-color: #ff4444;
        }

        .sf-mobile-toggle {
            display: none;
            background: none;
            border: none;
            font-size: 20px;
            cursor: pointer;
            color: var(--navy);
            padding: 5px;
        }

        /* MOBILE NAVIGATION - BULLETPROOF */
        @media (max-width: 768px) {
            .sf-nav-menu {
                display: none;
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                background: white;
                flex-direction: column;
                padding: 20px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.1);
                border-radius: 0 0 12px 12px;
                gap: 10px;
            }
            
            .sf-nav-menu.mobile-open {
                display: flex !important;
            }
            
            .sf-mobile-toggle {
                display: block !important;
            }
            
            .sf-user-section {
                display: none !important;
                position: absolute;
                top: 100%;
                right: 20px;
                background: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 5px 15px rgba(0,0,0,0.1);
                flex-direction: column;
                gap: 10px;
            }
            
            .sf-user-section.mobile-open {
                display: flex !important;
            }
        }

        /* PASSPORT PAGE STYLES */
        .header {
            background: linear-gradient(135deg, var(--navy) 0%, #004a6b 100%);
            color: var(--white);
            padding: 20px;
            text-align: center;
        }

        .header h1 {
            font-family: 'Poppins', sans-serif;
            font-size: 28px;
            font-weight: 700;
        }

        .passport-card {
            background: linear-gradient(135deg, var(--navy), #004a6b);
            color: var(--white);
            margin: -30px 20px 20px;
            border-radius: 16px;
            padding: 30px;
            box-shadow: 0 10px 30px rgba(0, 53, 84, 0.3);
            position: relative;
            overflow: hidden;
        }

        .passport-card::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -50%;
            width: 200%;
            height: 200%;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><circle cx="50" cy="50" r="2" fill="rgba(255,255,255,0.1)"/></svg>') repeat;
            animation: float 20s linear infinite;
        }

        @keyframes float {
            0% { transform: translateX(-50px) translateY(-50px); }
            100% { transform: translateX(0px) translateY(0px); }
        }

        .passport-header {
            display: flex;
            align-items: center;
            gap: 20px;
            margin-bottom: 25px;
            position: relative;
            z-index: 2;
        }

        .passport-avatar {
            width: 80px;
            height: 80px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            border: 3px solid rgba(255, 255, 255, 0.3);
        }

        .passport-avatar img {
            width: 100%;
            height: 100%;
            object-fit: contain;
            filter: brightness(0) invert(1);
        }

        .passport-info h2 {
            font-family: 'Poppins', sans-serif;
            font-size: 24px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .passport-id {
            font-family: 'Courier New', monospace;
            font-size: 16px;
            opacity: 0.9;
            letter-spacing: 2px;
        }

        .tier-badge {
            background: rgba(255, 255, 255, 0.2);
            padding: 8px 16px;
            border-radius: 20px;
            font-family: 'Poppins', sans-serif;
            font-size: 14px;
            font-weight: 600;
            display: inline-block;
            margin-top: 10px;
            border: 2px solid rgba(255, 255, 255, 0.3);
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 20px;
            position: relative;
            z-index: 2;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 28px;
            font-weight: 700;
            margin-bottom: 5px;
            color: var(--gold);
        }

        .stat-label {
            font-family: 'Poppins', sans-serif;
            font-size: 12px;
            opacity: 0.8;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        .main-content {
            padding: 20px;
            max-width: 600px;
            margin: 0 auto;
        }

        .section {
            background: var(--white);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
        }

        .section-title {
            font-family: 'Poppins', sans-serif;
            font-size: 18px;
            font-weight: 600;
            color: var(--navy);
            margin-bottom: 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .level-progress {
            margin-bottom: 30px;
        }

        .level-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .current-level {
            font-family: 'Poppins', sans-serif;
            font-size: 20px;
            font-weight: 700;
            color: var(--navy);
        }

        .xp-info {
            font-family: 'Poppins', sans-serif;
            font-size: 14px;
            color: #666;
        }

        .progress-bar {
            width: 100%;
            height: 12px;
            background: var(--accent-gray);
            border-radius: 6px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--success), var(--gold));
            border-radius: 6px;
            transition: width 0.3s ease;
        }

        .tier-benefits {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }

        .benefit-card {
            background: var(--light-gray);
            padding: 15px;
            border-radius: 8px;
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .benefit-icon {
            width: 40px;
            height: 40px;
            background: var(--navy);
            color: var(--white);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 16px;
        }

        .benefit-text {
            flex: 1;
        }

        .benefit-title {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            color: var(--navy);
            font-size: 14px;
            margin-bottom: 2px;
        }

        .benefit-desc {
            font-family: 'Poppins', sans-serif;
            font-size: 12px;
            color: #666;
        }

        .achievements-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 15px;
        }

        .achievement {
            text-align: center;
            padding: 15px 10px;
            border-radius: 8px;
            transition: all 0.3s ease;
            cursor: pointer;
        }

        .achievement.earned {
            background: linear-gradient(135deg, var(--gold), var(--warning));
            color: var(--white);
            transform: scale(1.05);
        }

        .achievement.locked {
            background: var(--accent-gray);
            color: #999;
        }

        .achievement-icon {
            font-size: 32px;
            margin-bottom: 8px;
        }

        .achievement-name {
            font-family: 'Poppins', sans-serif;
            font-size: 12px;
            font-weight: 600;
            margin-bottom: 2px;
        }

        .achievement-desc {
            font-family: 'Poppins', sans-serif;
            font-size: 10px;
            opacity: 0.8;
        }

        .venue-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
        }

        .venue-stat {
            background: var(--light-gray);
            padding: 15px;
            border-radius: 8px;
        }

        .venue-name {
            font-family: 'Poppins', sans-serif;
            font-weight: 600;
            color: var(--navy);
            margin-bottom: 8px;
            font-size: 14px;
        }

        .venue-metrics {
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .venue-points {
            font-size: 18px;
            font-weight: 700;
            color: var(--gold);
        }

        .venue-visits {
            font-family: 'Poppins', sans-serif;
            font-size: 12px;
            color: #666;
        }

        .nav-tabs {
            display: flex;
            background: var(--white);
            border-radius: 12px;
            padding: 4px;
            margin-bottom: 20px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
        }

        .nav-tab {
            flex: 1;
            padding: 12px;
            text-align: center;
            border-radius: 8px;
            font-family: 'Poppins', sans-serif;
            font-weight: 500;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: #666;
        }

        .nav-tab.active {
            background: var(--navy);
            color: var(--white);
        }

        .tab-content {
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        @media (max-width: 768px) {
            .passport-card {
                margin: -20px 15px 20px;
                padding: 20px;
            }
            
            .passport-header {
                flex-direction: column;
                text-align: center;
                gap: 15px;
            }
            
            .stats-grid {
                grid-template-columns: repeat(2, 1fr);
                gap: 15px;
            }
            
            .main-content {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- BULLETPROOF NAVIGATION - IDENTICAL TO AUTH.HTML -->
    <nav class="sf-navbar">
        <div class="sf-nav-container">
            <a href="../index.html" class="sf-logo">
                <div class="sf-logo-icon">
                    <img src="../assets/sf-logo.png" alt="SociallyFounded Logo" />
                </div>
                SociallyFounded
            </a>
            
            <ul class="sf-nav-menu" id="sfNavMenu">
                <li><a href="../index.html" class="sf-nav-link">Home</a></li>
                <li><a href="../member/venues.html" class="sf-nav-link">Venues</a></li>
                <li><a href="../core/passport.html" class="sf-nav-link active">My Passport</a></li>
                <li><a href="../founder/ideas.html" class="sf-nav-link">Ideas</a></li>
                <li><a href="#" class="sf-nav-link" onclick="showComingSoon()">Network</a></li>
                <li><a href="../core/profile.html" class="sf-nav-link">Profile</a></li>
            </ul>
            
            <div class="sf-user-section" id="sfUserSection">
                <div class="sf-user-passport" id="sfUserPassport">Not logged in</div>
                <button class="sf-logout-btn" id="sfLogoutBtn">
                    <i class="fas fa-sign-out-alt"></i> Logout
                </button>
            </div>
            
            <button class="sf-mobile-toggle" id="sfMobileToggle">
                <i class="fas fa-bars"></i>
            </button>
        </div>
    </nav>

    <div class="header">
        <h1>My SF Passport</h1>
    </div>

    <div class="passport-card">
        <div class="passport-header">
            <div class="passport-avatar">
                <img src="../assets/sf-logo.png" alt="SF Avatar" />
            </div>
            <div class="passport-info">
                <h2 id="userName">SF Member</h2>
                <div class="passport-id" id="passportId">SF-XXXXXX</div>
                <div class="tier-badge" id="tierBadge">Navy Tier • Level 1</div>
            </div>
        </div>
        
        <div class="stats-grid">
            <div class="stat-item">
                <div class="stat-value" id="totalPoints">0</div>
                <div class="stat-label">Total Points</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="totalHours">0h</div>
                <div class="stat-label">Hours Worked</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="venuesVisited">0</div>
                <div class="stat-label">Venues</div>
            </div>
            <div class="stat-item">
                <div class="stat-value" id="currentStreak">0</div>
                <div class="stat-label">Day Streak</div>
            </div>
        </div>
    </div>

    <div class="main-content">
        <div class="nav-tabs">
            <div class="nav-tab active" data-tab="progress">Progress</div>
            <div class="nav-tab" data-tab="achievements">Achievements</div>
            <div class="nav-tab" data-tab="venues">My Venues</div>
        </div>

        <!-- Progress Tab -->
        <div class="tab-content active" id="progress">
            <div class="section">
                <div class="section-title">
                    <i class="fas fa-chart-line"></i>
                    Level Progress
                </div>
                
                <div class="level-progress">
                    <div class="level-info">
                        <div class="current-level" id="currentLevel">Level 1</div>
                        <div class="xp-info" id="xpInfo">0 / 100 XP</div>
                    </div>
                    <div class="progress-bar">
                        <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                    </div>
                </div>

                <div class="section-title">
                    <i class="fas fa-crown"></i>
                    Navy Tier Benefits
                </div>
                
                <div class="tier-benefits">
                    <div class="benefit-card">
                        <div class="benefit-icon"><i class="fas fa-map-marker-alt"></i></div>
                        <div class="benefit-text">
                            <div class="benefit-title">Venue Check-ins</div>
                            <div class="benefit-desc">Earn points for time spent working</div>
                        </div>
                    </div>
                    <div class="benefit-card">
                        <div class="benefit-icon"><i class="fas fa-users"></i></div>
                        <div class="benefit-text">
                            <div class="benefit-title">Social Networking</div>
                            <div class="benefit-desc">Connect with other entrepreneurs</div>
                        </div>
                    </div>
                    <div class="benefit-card">
                        <div class="benefit-icon"><i class="fas fa-star"></i></div>
                        <div class="benefit-text">
                            <div class="benefit-title">Venue Reviews</div>
                            <div class="benefit-desc">Rate and review workspaces</div>
                        </div>
                    </div>
                    <div class="benefit-card">
                        <div class="benefit-icon"><i class="fas fa-gift"></i></div>
                        <div class="benefit-text">
                            <div class="benefit-title">Bronze Rewards</div>
                            <div class="benefit-desc">Basic loyalty program access</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Achievements Tab -->
        <div class="tab-content" id="achievements">
            <div class="section">
                <div class="section-title">
                    <i class="fas fa-trophy"></i>
                    Achievements
                </div>
                
                <div class="achievements-grid">
                    <div class="achievement earned" data-achievement="first-checkin">
                        <div class="achievement-icon">🎯</div>
                        <div class="achievement-name">First Check-in</div>
                        <div class="achievement-desc">Welcome to SF!</div>
                    </div>
                    <div class="achievement locked" data-achievement="week-streak">
                        <div class="achievement-icon">📅</div>
                        <div class="achievement-name">Week Warrior</div>
                        <div class="achievement-desc">7-day streak</div>
                    </div>
                    <div class="achievement locked" data-achievement="social-butterfly">
                        <div class="achievement-icon">🦋</div>
                        <div class="achievement-name">Social Butterfly</div>
                        <div class="achievement-desc">50 connections</div>
                    </div>
                    <div class="achievement locked" data-achievement="venue-explorer">
                        <div class="achievement-icon">🗺️</div>
                        <div class="achievement-name">Venue Explorer</div>
                        <div class="achievement-desc">Visit 25 venues</div>
                    </div>
                    <div class="achievement locked" data-achievement="time-master">
                        <div class="achievement-icon">⏰</div>
                        <div class="achievement-name">Time Master</div>
                        <div class="achievement-desc">100 hours worked</div>
                    </div>
                    <div class="achievement locked" data-achievement="community-builder">
                        <div class="achievement-icon">🏗️</div>
                        <div class="achievement-name">Community Builder</div>
                        <div class="achievement-desc">Add 5 venues</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Venues Tab -->
        <div class="tab-content" id="venues">
            <div class="section">
                <div class="section-title">
                    <i class="fas fa-map-marker-alt"></i>
                    My Venue Stats
                </div>
                
                <div class="venue-stats" id="venueStats">
                    <!-- Populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // BULLETPROOF NAVIGATION SYSTEM - IDENTICAL TO AUTH.HTML
        class SFNavigation {
            constructor() {
                this.mobileMenuOpen = false;
                this.initializeNavigation();
                this.updateUserStatus();
                this.bindEvents();
            }

            initializeNavigation() {
                console.log('🔧 Initializing SF Navigation...');
                
                this.hamburger = document.getElementById('sfMobileToggle');
                this.menu = document.getElementById('sfNavMenu');
                this.userSection = document.getElementById('sfUserSection');
                this.logoutBtn = document.getElementById('sfLogoutBtn');
                this.userPassport = document.getElementById('sfUserPassport');
                
                console.log('Navigation elements:', {
                    hamburger: !!this.hamburger,
                    menu: !!this.menu,
                    userSection: !!this.userSection,
                    logoutBtn: !!this.logoutBtn
                });
            }

            bindEvents() {
                if (this.hamburger) {
                    this.hamburger.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.toggleMobileMenu();
                    });
                }

                if (this.logoutBtn) {
                    this.logoutBtn.addEventListener('click', (e) => {
                        e.preventDefault();
                        this.handleLogout();
                    });
                }

                document.addEventListener('click', (e) => {
                    if (this.mobileMenuOpen && !e.target.closest('.sf-navbar')) {
                        this.closeMobileMenu();
                    }
                });
            }

            toggleMobileMenu() {
                console.log('🍔 Toggling mobile menu...');
                this.mobileMenuOpen = !this.mobileMenuOpen;
                
                if (this.menu) {
                    if (this.mobileMenuOpen) {
                        this.menu.classList.add('mobile-open');
                    } else {
                        this.menu.classList.remove('mobile-open');
                    }
                }
                
                if (this.userSection && this.userSection.style.display !== 'none') {
                    if (this.mobileMenuOpen) {
                        this.userSection.classList.add('mobile-open');
                    } else {
                        this.userSection.classList.remove('mobile-open');
                    }
                }
                
                console.log('Mobile menu open:', this.mobileMenuOpen);
            }

            closeMobileMenu() {
                this.mobileMenuOpen = false;
                if (this.menu) {
                    this.menu.classList.remove('mobile-open');
                }
                if (this.userSection) {
                    this.userSection.classList.remove('mobile-open');
                }
            }

            updateUserStatus() {
                const userData = JSON.parse(localStorage.getItem('sf_user'));
                
                if (userData && userData.passportId) {
                    if (this.userSection) {
                        this.userSection.style.display = 'flex';
                    }
                    
                    if (this.userPassport) {
                        let displayText = `${userData.passportId} • Level ${userData.passport.level}`;
                        if (userData.loyaltyProgram && userData.loyaltyProgram.totalPoints > 0) {
                            displayText += ` • ${userData.loyaltyProgram.totalPoints} pts`;
                        }
                        this.userPassport.textContent = displayText;
                    }
                } else {
                    if (this.userSection) {
                        this.userSection.style.display = 'none';
                    }
                }
            }

            handleLogout() {
                console.log('🚪 Logout initiated...');
                
                if (confirm('Are you sure you want to logout?')) {
                    localStorage.removeItem('sf_user');
                    localStorage.removeItem('sf_checkin');
                    
                    console.log('✅ User data cleared');
                    
                    alert('👋 Logged out successfully!\n\nThanks for using SociallyFounded!');
                    
                    console.log('🔄 Attempting redirect...');
                    
                    try {
                        window.location.href = '../index.html';
                    } catch (e) {
                        console.error('Redirect failed:', e);
                        try {
                            window.location.replace('../index.html');
                        } catch (e2) {
                            window.location = '../index.html';
                        }
                    }
                    
                    setTimeout(() => {
                        console.log('🔄 Fallback redirect...');
                        window.location.href = '../index.html';
                    }, 1000);
                }
            }

            refreshUserStatus() {
                this.updateUserStatus();
            }
        }

        class SFPassport {
            constructor() {
                this.userData = {};
                this.achievements = {
                    'first-checkin': { name: 'First Check-in', desc: 'Welcome to SF!', icon: '🎯', earned: false },
                    'week-streak': { name: 'Week Warrior', desc: '7-day streak', icon: '📅', earned: false },
                    'social-butterfly': { name: 'Social Butterfly', desc: '50 connections', icon: '🦋', earned: false },
                    'venue-explorer': { name: 'Venue Explorer', desc: 'Visit 25 venues', icon: '🗺️', earned: false },
                    'time-master': { name: 'Time Master', desc: '100 hours worked', icon: '⏰', earned: false },
                    'community-builder': { name: 'Community Builder', desc: 'Add 5 venues', icon: '🏗️', earned: false }
                };
                
                this.initializeUser();
                this.initializeTabs();
                this.updateDisplay();
            }

            initializeUser() {
                const userData = JSON.parse(localStorage.getItem('sf_user'));
                if (userData) {
                    this.userData = userData;
                    if (userData.passport.totalCheckIns > 0) {
                        this.achievements['first-checkin'].earned = true;
                    }
                } else {
                    this.userData = {
                        passportId: 'SF-DEMO01',
                        passport: {
                            level: 1,
                            experience: 0,
                            tier: 'Navy',
                            totalCheckIns: 0,
                            currentStreak: 0
                        },
                        loyaltyProgram: {
                            totalPoints: 0,
                            venuePoints: {}
                        }
                    };
                }
            }

            updateDisplay() {
                document.getElementById('passportId').textContent = this.userData.passportId;
                document.getElementById('tierBadge').textContent = 
                    `${this.userData.passport.tier} Tier • Level ${this.userData.passport.level}`;

                document.getElementById('totalPoints').textContent = this.userData.loyaltyProgram.totalPoints;
                document.getElementById('totalHours').textContent = this.calculateTotalHours();
                document.getElementById('venuesVisited').textContent = Object.keys(this.userData.loyaltyProgram.venuePoints).length;
                document.getElementById('currentStreak').textContent = this.userData.passport.currentStreak;

                const currentLevel = this.userData.passport.level;
                const currentXP = this.userData.passport.experience;
                const xpForNextLevel = currentLevel * 100;
                const progressPercent = (currentXP % xpForNextLevel) / xpForNextLevel * 100;

                document.getElementById('currentLevel').textContent = `Level ${currentLevel}`;
                document.getElementById('xpInfo').textContent = `${currentXP} / ${xpForNextLevel} XP`;
                document.getElementById('progressFill').style.width = `${progressPercent}%`;

                this.updateAchievements();
                this.updateVenueStats();
            }

            calculateTotalHours() {
                const avgSessionPoints = 50;
                const estimatedSessions = Math.floor(this.userData.loyaltyProgram.totalPoints / avgSessionPoints);
                const estimatedHours = estimatedSessions * 2;
                return `${estimatedHours}h`;
            }

            updateAchievements() {
                Object.keys(this.achievements).forEach(key => {
                    const achievement = this.achievements[key];
                    const element = document.querySelector(`[data-achievement="${key}"]`);
                    if (element) {
                        element.className = `achievement ${achievement.earned ? 'earned' : 'locked'}`;
                    }
                });
            }

            updateVenueStats() {
                const venueStats = document.getElementById('venueStats');
                venueStats.innerHTML = '';

                const venuePoints = this.userData.loyaltyProgram.venuePoints;
                
                if (Object.keys(venuePoints).length === 0) {
                    venueStats.innerHTML = '<p style="text-align: center; color: #666; padding: 40px; font-family: \'Poppins\', sans-serif;">No venue visits yet. Start checking in to see your stats!</p>';
                    return;
                }

                const venueNames = {
                    'venue-001': 'Brew & Bytes Cafe',
                    'venue-002': 'WorkHub Downtown',
                    'venue-003': 'Public Library JLT'
                };

                Object.entries(venuePoints).forEach(([venueId, points]) => {
                    const venueName = venueNames[venueId] || 'Unknown Venue';
                    const visits = Math.floor(points / 30);

                    const venueDiv = document.createElement('div');
                    venueDiv.className = 'venue-stat';
                    venueDiv.innerHTML = `
                        <div class="venue-name">${venueName}</div>
                        <div class="venue-metrics">
                            <div class="venue-points">${points} pts</div>
                            <div class="venue-visits">${visits} visits</div>
                        </div>
                    `;
                    venueStats.appendChild(venueDiv);
                });
            }

            initializeTabs() {
                document.querySelectorAll('.nav-tab').forEach(tab => {
                    tab.addEventListener('click', () => {
                        document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
                        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
                        
                        tab.classList.add('active');
                        document.getElementById(tab.dataset.tab).classList.add('active');
                    });
                });
            }
        }

        // Global functions
        function showComingSoon() {
            alert('🚀 Coming Soon!\n\nThis feature is in development.\nStay tuned for updates!');
        }

        // Initialize systems
        const sfNav = new SFNavigation();
        const sfPassport = new SFPassport();

        // Make navigation globally accessible
        window.sfNav = sfNav;

        // Auto-refresh data every 30 seconds
        setInterval(() => {
            sfPassport.initializeUser();
            sfPassport.updateDisplay();
            sfNav.refreshUserStatus();
        }, 30000);

        // Update when user data changes
        window.addEventListener('storage', (e) => {
            if (e.key === 'sf_user') {
                sfPassport.initializeUser();
                sfPassport.updateDisplay();
                sfNav.updateUserStatus();
            }
        });

        console.log('✅ SF Passport system initialized');
        console.log('✅ SF Navigation system initialized');
    </script>
</body>
</html>
